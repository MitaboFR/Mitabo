{% extends "base.html" %}
{% block content %}

<div class="profil-container">
    <h2>Profil de {{ user.username }}</h2>
    <img src="{{ url_for('static', filename='avatars/' ~ user.avatar) }}" alt="Avatar" width="120">
    <p>{{ user.bio }}</p>
    <p>Membre depuis : {{ user.created_at.strftime("%d/%m/%Y") }}</p>

    <!-- --- Abonnement --- -->
    {% if current_user.is_authenticated and current_user.id != user.id %}
        {% if current_user.is_following(user) %}
            <a href="{{ url_for('profil.unfollow_user', user_id=user.id) }}" class="btn btn-warning">Se désabonner ❌</a>
        {% else %}
            <a href="{{ url_for('profil.follow_user', user_id=user.id) }}" class="btn btn-success">S'abonner ✅</a>
        {% endif %}
    {% endif %}

    <hr>

    <!-- --- Vidéos de l'utilisateur --- -->
    <h3>Vidéos de {{ user.username }}</h3>
    <ul>
        {% for v in videos %}
            <li>
                <a href="{{ url_for('video.show_video', video_id=v.id) }}">
                    🎬 {{ v.title }} ({{ v.views }} vues)
                </a>
            </li>
        {% else %}
            <li>Aucune vidéo postée.</li>
        {% endfor %}
    </ul>
</div>

{% endblock %}
<h2>Profil de {{ user.username }}</h2>
<img src="{{ url_for('static', filename='avatars/' ~ user.avatar) }}" alt="Avatar" width="120">
<p>{{ user.bio }}</p>
<p>Membre depuis : {{ user.created_at.strftime("%d/%m/%Y") }}</p>

<p>
    👥 Abonnés : {{ user.followers_count }} |
    ➡️ Abonnements : {{ user.following_count }}
</p>
